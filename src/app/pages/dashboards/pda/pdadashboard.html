<div class="card">
    <!-- Header Section -->
    <div class="flex flex-col md:flex-row md:items-start md:justify-between mb-4">
        <div class="text-surface-900 dark:text-surface-0 text-xl font-semibold mb-4 md:mb-0">
            PDA Records
        </div>
        <div class="inline-flex items-center">
            <p-iconfield>
                <p-inputicon class="pi pi-search" />
                <input
                    pInputText
                    type="text"
                    (input)="onSearch($event)"
                    placeholder="Search"
                    [style]="{ borderRadius: '2rem' }"
                    class="w-full"
                />
            </p-iconfield>
            <p-button 
                icon="pi pi-filter" 
                class="mx-4"
                rounded
                severity="secondary" 
                text="true"
                (click)="onFilter()"
                pTooltip="Filter"
                pTooltipPosition="top">
            </p-button>
            <p-button 
                icon="pi pi-download" 
                class="mx-4"
                rounded
                severity="secondary" 
                text="true"
                (click)="onDownload()"
                pTooltip="Download"
                pTooltipPosition="top">
            </p-button>
            <p-button 
                icon="pi pi-upload" 
                class="mx-4"
                rounded
                severity="secondary" 
                text="true"
                (click)="onUpload()"
                pTooltip="Upload"
                pTooltipPosition="top">
            </p-button>
            <p-button 
                icon="pi pi-th-large" 
                class="mx-4"
                rounded
                severity="secondary" 
                text="true"
                (click)="onGrid()"
                pTooltip="Grid View"
                pTooltipPosition="top">
            </p-button>
            <p-button 
                label="New" 
                icon="pi pi-plus" 
                severity="primary"
                rounded
                (click)="onNew()"
                class="ml-2">
            </p-button>
        </div>
    </div>

    <!-- Table Section -->
    <p-table 
        #dt
        [value]="pdaRecords()" 
        [paginator]="true" 
        [rows]="rows()"
        [totalRecords]="totalRecords()"
        [first]="first()"
        [showCurrentPageReport]="true"
        currentPageReportTemplate="{first} to {last} of {totalRecords}"
        [rowsPerPageOptions]="[5, 10, 25]"
        (onPage)="onPageChange($event)"
        responsiveLayout="scroll"
    >
        <ng-template #header>
            <tr>
                <th pSortableColumn="cod">
                    <span class="flex items-center gap-2">Cod. <p-sortIcon field="cod"></p-sortIcon></span>
                </th>
                <th pSortableColumn="client">
                    <span class="flex items-center gap-2">Client <p-sortIcon field="client"></p-sortIcon></span>
                </th>
                <th pSortableColumn="vessel">
                    <span class="flex items-center gap-2">Vessel <p-sortIcon field="vessel"></p-sortIcon></span>
                </th>
                <th pSortableColumn="port">
                    <span class="flex items-center gap-2">Port <p-sortIcon field="port"></p-sortIcon></span>
                </th>
                <th pSortableColumn="cargo">
                    <span class="flex items-center gap-2">Cargo <p-sortIcon field="cargo"></p-sortIcon></span>
                </th>
                <th pSortableColumn="voyage">
                    <span class="flex items-center gap-2">Voyage <p-sortIcon field="voyage"></p-sortIcon></span>
                </th>
                <th pSortableColumn="callStatus">
                    <span class="flex items-center gap-2">Call Status <p-sortIcon field="callStatus"></p-sortIcon></span>
                </th>
                <th pSortableColumn="pdaStatus">
                    <span class="flex items-center gap-2">PDA Status <p-sortIcon field="pdaStatus"></p-sortIcon></span>
                </th>
                <th pSortableColumn="lastUpdate">
                    <span class="flex items-center gap-2">Last Upd. <p-sortIcon field="lastUpdate"></p-sortIcon></span>
                </th>
                <th pSortableColumn="balance">
                    <span class="flex items-center gap-2">Balance <p-sortIcon field="balance"></p-sortIcon></span>
                </th>
                <th>Actions</th>
            </tr>
        </ng-template>
        <ng-template #body let-record>
            <tr>
                <td style="width: 10%; min-width: 5rem;">{{ record.cod }}</td>
                <td style="width: 15%; min-width: 7rem;">{{ record.client }}</td>
                <td style="width: 15%; min-width: 7rem;">{{ record.vessel }}</td>
                <td style="width: 10%; min-width: 7rem;">{{ record.port }}</td>
                <td style="width: 10%; min-width: 7rem;">{{ record.cargo }}</td>
                <td style="width: 10%; min-width: 7rem;">{{ record.voyage }}</td>
                <td style="width: 10%; min-width: 7rem;">
                    <p-tag 
                        [value]="record.callStatus" 
                        [severity]="getStatusSeverity(record.callStatus)"
                    ></p-tag>
                </td>
                <td style="width: 10%; min-width: 7rem;">
                    <p-tag 
                        [value]="record.pdaStatus" 
                        [severity]="getStatusSeverity(record.pdaStatus)"
                    ></p-tag>
                </td>
                <td style="width: 10%; min-width: 7rem;">{{ record.lastUpdate }}</td>
                <td style="width: 10%; min-width: 7rem;">
                    <span [class]="'balance ' + getBalanceSeverity(record.balance)">
                        {{ record.balance }}
                    </span>
                </td>
                <td style="width: 10%; min-width: 7rem;">
                    <div class="inline-flex gap-2">
                        <p-button 
                            icon="pi pi-pencil" 
                            severity="secondary" 
                            text="true"
                            rounded
                            size="small"
                            (click)="onEdit(record)"
                            pTooltip="Edit">
                        </p-button>
                        <p-button 
                            icon="pi pi-trash" 
                            severity="danger" 
                            text="true"
                            rounded
                            size="small"
                            (click)="onDelete(record)"
                            pTooltip="Delete">
                        </p-button>
                    </div>
                </td>
            </tr>
        </ng-template>
    </p-table>
</div> 